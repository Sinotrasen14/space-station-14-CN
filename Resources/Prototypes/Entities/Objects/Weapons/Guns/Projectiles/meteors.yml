- type: entity
  id: BaseMeteor
  name: 流星
  description: 你更喜欢它们在大气中燃烧的样子。
  abstract: true
  components:
  - type: Sprite
    noRot: false
    sprite: Objects/Misc/meteor.rsi
  - type: Projectile
    damage: {}
    deleteOnCollide: false
  - type: Meteor
    damageTypes:
      types:
        Blunt: 1
  - type: TimedDespawn
    lifetime: 120
  - type: Clickable
  - type: Physics
    bodyType: Dynamic
    bodyStatus: InAir
    angularDamping: 0
    linearDamping: 0
  - type: Fixtures
    fixtures:
      projectile:
        shape:
          !type:PhysShapeCircle
          radius: 0.4
        density: 100
        hard: false
        layer:
        - LargeMobLayer
        mask:
        - Impassable
        - BulletImpassable
  - type: Damageable
    damageContainer: Inorganic
  - type: Explosive
    explosionType: Default
    intensitySlope: 2
    maxIntensity: 100
    maxTileBreak: 1
    tileBreakScale: 2
  - type: TileFrictionModifier
    modifier: 0


- type: entity
  parent: BaseMeteor
  id: MeteorSpaceDust
  name: 太空尘埃
  description: 让空间站打了个喷嚏。
  components:
  - type: Sprite
    state: space_dust
  - type: Fixtures
    fixtures:
      projectile:
        shape:
          !type:PhysShapeCircle
          radius: 0.45
        density: 100
        hard: false
        layer:
        - LargeMobLayer
        mask:
        - Impassable
        - BulletImpassable
  - type: Explosive
    totalIntensity: 25
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 100
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:ExplodeBehavior

- type: entity
  parent: BaseMeteor
  id: MeteorSmall
  suffix: Small
  components:
  - type: Sprite
    state: small
  - type: Fixtures
    fixtures:
      projectile:
        shape:
          !type:PhysShapeCircle
          radius: 0.25
        density: 100
        hard: false
        layer:
        - LargeMobLayer
        mask:
        - Impassable
        - BulletImpassable
  - type: Explosive
    totalIntensity: 50
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 300
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:ExplodeBehavior
      - !type:WeightedSpawnEntityBehavior
        weightedEntityTable: "MeteorSpawnAsteroidWallTable"
        minSpawn: 2
        maxSpawn: 4
        spawnAfter: 0.5

- type: entity
  parent: BaseMeteor
  id: MeteorMedium
  suffix: Medium
  components:
  - type: Sprite
    state: medium
  - type: Fixtures
    fixtures:
      projectile:
        shape:
          !type:PhysShapeCircle
          radius: 0.3
        density: 100
        hard: false
        layer:
        - LargeMobLayer
        mask:
        - Impassable
        - BulletImpassable
  - type: Explosive
    totalIntensity: 100
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 500
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:ExplodeBehavior
      - !type:WeightedSpawnEntityBehavior
        weightedEntityTable: "MeteorSpawnAsteroidWallTable"
        spawnOffset: 2
        minSpawn: 3
        maxSpawn: 6
        spawnAfter: 0.5

- type: entity
  parent: BaseMeteor
  id: MeteorLarge
  suffix: Large
  components:
  - type: Sprite
    state: big
  - type: Explosive
    totalIntensity: 150
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 1200
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:ExplodeBehavior
      - !type:WeightedSpawnEntityBehavior
        weightedEntityTable: "MeteorSpawnAsteroidWallTable"
        spawnOffset: 3
        minSpawn: 5
        maxSpawn: 8
        spawnAfter: 0.5

- type: entity
  parent: BaseMeteor
  id: MeteorUrist
  name: 乌里斯特·麦克流星
  description: 作为一名拥有稳定坚定心智与无限驱动力、对金融与支配具有天然亲和力的社会成功人士，你被选中了——不，你早已被神圣（生物性）创伤毫不费力地引导至此刻。命运之门轰然洞开，你再度立于脉动的虚无之上。那是灵魂频闪的剧痛。
  suffix: Meteor
  components:
  - type: Sprite
    state: human_pixel
  - type: SolutionContainerManager
    solutions:
      blood:
        maxVol: 1000
        reagents:
        - ReagentId: Blood
          Quantity: 1000
  - type: Explosive
    totalIntensity: 25
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 3000
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:PlaySoundBehavior
        sound:
          collection: MaleScreams
          params:
            volume: 10
      - !type:SpillBehavior
        solution: blood
      - !type:SpawnEntitiesBehavior
        spawn:
          FoodMeatHuman:
            min: 1
            max: 2
      - !type:ExplodeBehavior

# Cow Meteor
- type: entity
  parent: BaseMeteor
  id: MeteorCow
  name: 宇宙神牛
  description: 以相对论速度移动！
  suffix: Meteor
  components:
  - type: Sprite
    state: cow_pixel
  - type: Explosive
    totalIntensity: 25
  - type: SolutionContainerManager
    solutions:
      milk:
        maxVol: 500
        reagents:
        - ReagentId: Milk
          Quantity: 500
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 3000
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/Animals/cow_moo.ogg
      - !type:SpillBehavior
        solution: milk
      - !type:SpawnEntitiesBehavior
        spawn:
          FoodMeat:
            min: 1
            max: 2
          FoodCheeseSlice:
            min: 1
            max: 2
      - !type:ExplodeBehavior

# Clown Meteor
- type: entity
  parent: BaseMeteor
  id: MeteorClown
  name: 轰天固醇
  description: 最后的轰天时刻！
  suffix: Meteor
  components:
  - type: Sprite
    state: clown_pixel
  - type: Explosive
    totalIntensity: 25
  - type: SolutionContainerManager
    solutions:
      laughter:
        maxVol: 500
        reagents:
        - ReagentId: Laughter
          Quantity: 500
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 3000
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/Items/bikehorn.ogg
      - !type:SpillBehavior
        solution: laughter
      - !type:SpawnEntitiesBehavior
        spawn:
          FoodMeatClown:
            min: 1
            max: 2
          TrashBananaPeel:
            min: 1
            max: 4
          RubberChicken:
            min: 0
            max: 1
      - !type:ExplodeBehavior

# Potato Meteor
- type: entity
  parent: BaseMeteor
  id: MeteorPotato
  name: 太空土豆
  description: 来自太空深处的淀粉威胁。含有每日建议钠摄入量的200%！
  components:
  - type: Sprite
    state: potato
  - type: Explosive
    totalIntensity: 25
  - type: SolutionContainerManager
    solutions:
      ketchup:
        maxVol: 100
        reagents:
        - ReagentId: Ketchup
          Quantity: 100
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 3000
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:SpillBehavior
        solution: ketchup
      - !type:SpawnEntitiesBehavior
        spawn:
          FoodMealFries:
            min: 1
            max: 5
      - !type:ExplodeBehavior
